# 创建国家医保药品数据采集爬虫

## 实现方案

1. **创建新的爬虫文件**：在 `spiders` 目录下创建 `nhsa_drug_spider.py` 文件
2. **继承基础类**：继承 `BaseRequestSpider` 类
3. **配置爬虫参数**：

   * 设置爬虫名称为 `nhsa_drug_spider`

   * 配置目标 API URL：`https://code.nhsa.gov.cn/yp/getPublishGoodsDataInfo.html`

   * 配置合适的请求头和并发设置
4. **实现核心方法**：

   * `start_requests()`：构造初始 POST 请求，使用 `application/x-www-form-urlencoded` 格式

   * `parse_logic()`：处理响应数据，解析 JSON 并提取药品信息

   * `_create_item()`：构造 HybridCrawlerItem 数据项
5. **处理分页**：根据 API 响应中的分页信息，自动生成后续页码请求
6. **数据处理**：将采集到的药品数据转换为指定的数据格式

## 关键设计点

* 使用 `application/x-www-form-urlencoded` 格式发送 POST 请求

* 处理 JSON 响应并提取药品数据

* 实现自动分页逻辑

* 构造符合要求的 HybridCrawlerItem 数据项

* 配置合适的请求头，包括 Cookie、User-Agent 等

* 设置合理的并发数和延迟，避免对服务器造成过大压力

## 文件结构

```
hybrid_crawler/
└── spiders/
    ├── base_spiders.py
    ├── fujian_drug_store.py
    └── nhsa_drug_spider.py  # 新创建的爬虫文件
```

## 预期效果

* 爬虫能够成功发送 POST 请求到国家医保药品数据 API

* 能够处理 API 返回的 JSON 数据

* 能够自动处理分页，采集所有药品数据

* 生成符合要求的 HybridCrawlerItem 数据项

* 数据能够被正确入库处理

